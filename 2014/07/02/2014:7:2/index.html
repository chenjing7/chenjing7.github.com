<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>递归Recursion | Chen Jing</title>
  <meta name="author" content="chen jing">
  
  <meta name="description" content="德罗斯特效应Droste Effect 递归的一种视觉形式
看到一个简单的网页介绍递归Recuison
我们会学习

递归的定义
递归是怎么工作的
递归怎样简化一些难题

Note：递归是一个相当高级的话题，并且大多数应用场合你甚至一点也不需要知道它。但有时，它的作用却异常巨大。所以，这里我把它提出来方便你学习研究。不要慌，如果你没有一下子弄明白它。
#1 什么是递归？
尽管Loop循环结构是编程的基石，但是有时没有(显式的）循环结构，你也可以创建程序。有些语言，比如Scheme，没有显式的循环结构For，While等。相反，他们使用递归这种手段，因为对于一些类型的问题会很有效，所以我们现在就来看一下。
递归简单讲：调用的函数作为定义的同一函数的一部份。因此GNU（许多自由软件的来源）的定义就是GNU&#39;s Not Unix的缩写，GNU是GNU定义的一部分。
递归能工作的关键是必须有一个终止条件使得函数能够跳出递归(GNU的没能跳出自身的递归，困在无限的循环中)。
看一个简单的例子，数学里的阶乘N ! = N × (N - 1)  × (N - 2)... ×1 （1 ! = 1）。我们换用递归的方式来看阶乘N ! = N × (N - 1) ！">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="递归Recursion"/>
  <meta property="og:site_name" content="Chen Jing"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Chen Jing" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
</head>


<body>
  <header id="header" class="inner"><div class="alignleft">
  <h1><a href="/">Chen Jing</a></h1>
  <h2><a href="/">记录发生</a></h2>
 
  </div>
<nav id="main-nav" class="alignright">
  <ul>
    
      <li><a href="">Home</a></li>
    
      <li><a href="archives">Archives</a></li>
    
  </ul>
  <div class="clearfix"></div>
</nav>
<div class="clearfix"></div></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2014-07-02T00:00:00.000Z"><a href="/2014/07/02/2014:7:2/">7月 2 2014</a></time>
      
      
  
    <h1 class="title">递归Recursion</h1>
  

    </header>
    <div class="entry">
      
        <p><img  src="https://raw.githubusercontent.com/chenjing002/chenjing.github.com/gh-pages/images/011.png"  width="50%"/ ></p>
<p><em>德罗斯特效应Droste Effect</em> 递归的一种视觉形式</p>
<p>看到一个简单的网页介绍<a href="http://www.freenetpages.co.uk/hp/alan.gauld/tutrecur.htm" target="_blank">递归Recuison</a></p>
<p>我们会学习</p>
<ul>
<li>递归的定义</li>
<li>递归是怎么工作的</li>
<li>递归怎样简化一些难题</li>
</ul>
<p>Note：递归是一个相当高级的话题，并且大多数应用场合你甚至一点也不需要知道它。但有时，它的作用却异常巨大。所以，这里我把它提出来方便你学习研究。不要慌，如果你没有一下子弄明白它。</p>
<p><span style="font-size:18px;">#1 什么是递归？</span></p>
<p>尽管Loop循环结构是编程的基石，但是有时没有(显式的）循环结构，你也可以创建程序。有些语言，比如Scheme，没有显式的循环结构For，While等。相反，他们使用递归这种手段，因为对于一些类型的问题会很有效，所以我们现在就来看一下。</p>
<p>递归简单讲：调用的函数作为定义的同一函数的一部份。因此GNU（许多自由软件的来源）的定义就是<em>GNU&#39;s Not Unix</em>的缩写，GNU是GNU定义的一部分。</p>
<p>递归能工作的关键是必须有一个终止条件使得函数能够跳出递归(GNU的没能跳出自身的递归，困在无限的循环中)。</p>
<p>看一个简单的例子，数学里的阶乘N ! = N × (N - 1)  × (N - 2)... ×1 （1 ! = 1）。我们换用递归的方式来看阶乘N ! = N × (N - 1) ！
<a id="more"></a>
所以</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="number">1</span>! = <span class="number">1</span>
<span class="number">2</span>! = <span class="number">1</span> x <span class="number">2</span> = <span class="number">2</span>
<span class="number">3</span>! = <span class="number">1</span> x <span class="number">2</span> x <span class="number">3</span> = <span class="number">2</span>! x <span class="number">3</span> = <span class="number">6</span>
<span class="keyword">N</span>! = <span class="number">1</span> x <span class="number">2</span> x <span class="number">3</span> x .... (<span class="keyword">N</span>-<span class="number">2</span>) x (<span class="keyword">N</span>-<span class="number">1</span>) x <span class="keyword">N</span> = (<span class="keyword">N</span>-<span class="number">1</span>)! x <span class="keyword">N</span>
</pre></td></tr></table></figure>

<p>用Python表达：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="function"><span class="keyword">def</span> <span class="title">factorial</span><span class="params">(n)</span>:</span>
    <span class="keyword">if</span> n == <span class="number">1</span>:
        <span class="keyword">return</span> <span class="number">1</span>
    <span class="keyword">else</span>:
        <span class="keyword">return</span> n * factorial(n-<span class="number">1</span>)
</pre></td></tr></table></figure>

<p>现在由于每次N都递减1，当N等于1时，程序就完成了。但这里有一个小的Bug，当调用小于1的数时，会进入死循环！需要修改<code>n == 1</code>
为<code>n &lt;= 1</code>。你可以看到在终止条件上是多么容易犯错误，这也是递归函数中最常犯错误的原因。测试所有终止点附近的值，来确保正确的运算。</p>
<p>看一下，运行递归程序：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="function"><span class="title">factorial</span><span class="params">(<span class="number">4</span>)</span> = 4 * <span class="title">factorial</span><span class="params">(<span class="number">3</span>)</span>
<span class="title">factorial</span><span class="params">(<span class="number">3</span>)</span> = 3 * <span class="title">factorial</span><span class="params">(<span class="number">2</span>)</span>
<span class="title">factorial</span><span class="params">(<span class="number">2</span>)</span> = 2 * <span class="title">factorial</span><span class="params">(<span class="number">1</span>)</span>
<span class="title">factorial</span><span class="params">(<span class="number">1</span>)</span> = 1</span>
</pre></td></tr></table></figure>

<p>写一个不用递归的阶乘函数并不难，你只需要遍历所有的N。但是下面的一些功能如果不用递归就比较难写了。</p>
<p><span style="font-size:18px;">#2 递归列表</span></p>
<p>递归很起作用的是另外一个领域是处理列表。使用递归，方便我们对空列表进行测试和生成一个没有首元素的列表。在Python把这种方法叫做<em>slicing</em>，这在Python手册里面有详细的介绍，这里我们只需要知道怎么索引到列表里的元素。比如：</p>
<p>取一个叫L列表的第一个元素：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="keyword">first</span> = L[<span class="number">0</span>] <span class="comment"># just use normal indexing</span>
</pre></td></tr></table></figure>

<p>取L列表其余元素：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre>butfirst = L[<span class="number">1</span>:] # <span class="keyword">use</span> slicing <span class="keyword">to</span> get elements <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4.</span>..
</pre></td></tr></table></figure>

<p>在Python 命令窗口，打印结果，看是否正确：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="prompt">&gt;&gt;&gt; </span>L =[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> L[<span class="number">0</span>]
<span class="number">1</span>
<span class="prompt">&gt;&gt;&gt; </span><span class="keyword">print</span> L[<span class="number">1</span>:]
[<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]
</pre></td></tr></table></figure>

<p>Ok，接着我们使用Recusion来打印列表。考虑平凡情况，使用函数<em>printlist</em>来打印每个元素：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="function"><span class="keyword">def</span> <span class="title">printList</span><span class="params">(L)</span>:</span>
    <span class="keyword">if</span> L:
        <span class="keyword">print</span> L[<span class="number">0</span>]
	printList(L[<span class="number">1</span>:])
</pre></td></tr></table></figure>

<p>如果L为真(非空的), 打印第一个元素，接着对列表的其他部分做一下处理：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="comment"># NON PYTHON PSEUDO CODE</span>
PrintList([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])
   prints [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>][<span class="number">0</span>] =&gt; <span class="number">1</span>
   runs printList([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>][<span class="number">1</span>:]) =&gt; printList([<span class="number">2</span>,<span class="number">3</span>])
   =&gt; we're now <span class="keyword">in</span> printList([<span class="number">2</span>,<span class="number">3</span>])
         prints [<span class="number">2</span>,<span class="number">3</span>][<span class="number">0</span>] =&gt; <span class="number">2</span>
         runs printList([<span class="number">2</span>,<span class="number">3</span>][<span class="number">1</span>:]) =&gt; printList([<span class="number">3</span>])
	 =&gt; we are now <span class="keyword">in</span> printList([<span class="number">3</span>])
	       prints [<span class="number">3</span>][<span class="number">0</span>] =&gt; <span class="number">3</span>
	       runs printList([<span class="number">3</span>][<span class="number">1</span>:]) =&gt; printList([])
	       =&gt; we are now <span class="keyword">in</span> printList([])
	             <span class="string">"if L"</span> <span class="keyword">is</span> <span class="constant">false</span> <span class="keyword">for</span> an empty <span class="type">list</span>, so we <span class="constant">return</span> None
	 =&gt; we are <span class="keyword">back</span> <span class="keyword">in</span> printList([<span class="number">3</span>])
	       <span class="keyword">it</span> reaches <span class="keyword">the</span> <span class="keyword">end</span> <span class="keyword">of</span> <span class="keyword">the</span> function <span class="keyword">and</span> returns None
   =&gt; we are <span class="keyword">back</span> <span class="keyword">in</span> printList([<span class="number">2</span>,<span class="number">3</span>])
	 <span class="keyword">it</span> reaches <span class="keyword">the</span> <span class="keyword">end</span> <span class="keyword">of</span> <span class="keyword">the</span> function <span class="keyword">and</span> returns None
=&gt; we are <span class="keyword">back</span> <span class="keyword">in</span> printList([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])
   <span class="keyword">it</span> reaches <span class="keyword">the</span> <span class="keyword">end</span> <span class="keyword">of</span> <span class="keyword">the</span> function <span class="keyword">and</span> returns None
</pre></td></tr></table></figure>

<p>对于一些常见的简单列表，使用for循环就可以打印所有元素了。但如果一个列表很复杂或者自身包含其他的列表，我们不是简单的打印这个列表，怎么来处理呢？</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
</pre></td><td class="code"><pre><span class="function"><span class="keyword">def</span> <span class="title">printList</span><span class="params">(L)</span>:</span>
    <span class="comment"># if its empty do nothing</span>
    <span class="keyword">if</span> <span class="keyword">not</span> L: <span class="keyword">return</span>
    <span class="comment"># if it's a list call printList on 1st element</span>
    <span class="keyword">if</span> type(L[<span class="number">0</span>]) == type([]):
        printList(L[<span class="number">0</span>])
    <span class="keyword">else</span>: <span class="comment">#no list so just print </span>
        <span class="keyword">print</span> L[<span class="number">0</span>] 
    <span class="comment"># now process the rest of L </span>
    printList(L[<span class="number">1</span>:])
</pre></td></tr></table></figure>

<p>现在，如果你使用常规的循环结构，你会发现很困难了。相比较而言，递归使复杂的任务变简单了。</p>
<p>注意！递归是有迷惑人的黑幕的！递归在处理大型的数据结构的时候是很吃内存的。所以，如果你内存不足或者有很大的数据结构要处理，使用常规的复杂的条件代码会更安全。</p>
<p>最后说一点，VBScript和JavaScript都支持递归。该说的前面的都已经说了，这里我就只给出阶乘的VBScript和JavaScript递归版本。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="code"><pre>
	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/vbscript"</span>&gt;</span><span class="javascript">
	<span class="built_in">Function</span> factorial(N)
  	 	<span class="keyword">if</span> N &lt;=<span class="number">1</span> Then
      			Factorial = <span class="number">1</span>
   		Else
      			Factorial = N * Factorial(N-<span class="number">1</span>)
   		End If
	End <span class="built_in">Function</span>
	Document.Write <span class="string">"7! = "</span> & CStr(Factorial(<span class="number">7</span>))
	</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
	
	<span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript">
	<span class="function"><span class="keyword">function</span> <span class="title">factorial</span><span class="params">(n)</span>{</span>
   		<span class="keyword">if</span> (n &lt;= <span class="number">1</span>)
      			<span class="keyword">return</span> <span class="number">1</span>;
   		<span class="keyword">else</span>
     			<span class="keyword">return</span> n * factorial(n-<span class="number">1</span>);
	};
	document.write(<span class="string">"6! = "</span> + factorial(<span class="number">6</span>));
	</span><span class="tag">&lt;/<span class="title">script</span>&gt;</span>
</pre></td></tr></table></figure>

<p>需要记住3点</p>
<ol>
<li>递归函数调用自身</li>
<li>递归函数必须有一个终止条件否则会陷入无限循环</li>
<li>递归通常是吃内存的，但不总是这样。</li>
</ol>

      
    </div>
    <footer>
      
        
        
  
  <div class="tags">
    <a href="/tags/记录/">记录</a>
  </div>

        
      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>


<nav id="pagination" >
    
    <a href="/2014/07/03/电影&音乐/" class="alignleft prev" >上一页</a>
    
    
    <a href="/2014/06/29/2014:6:29/" class="alignright next" >下一页</a>
    
    <div class="clearfix"></div>
</nav>
<section id="comment">
<!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="请将此处替换成文章在你的站点中的ID" data-title="请替换成文章的标题" data-url="请替换成文章的网址"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"777777"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->
</section>

</div></div>
    <aside id="sidebar" class="alignright">
  

  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/生活/">生活</a><small>3</small></li>
  
    <li><a href="/tags/电影 & 音乐/">电影 &amp; 音乐</a><small>1</small></li>
  
    <li><a href="/tags/记录/">记录</a><small>4</small></li>
  
    <li><a href="/tags/读书/">读书</a><small>2</small></li>
  
  </ul>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2014 chen jing
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>




</body>
</html>